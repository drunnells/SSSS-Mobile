<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Cross-Browser QRCode generator for Javascript</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<script type="text/javascript" src="jquery.min.jsf"></script>
<script type="text/javascript" src="qrcode.jsf"></script>
</head>
<body style="margin:0; padding:0;">

<style>
body {
	overflow: hidden;
	background-color: #ffffff;
}

#qrcode {
	width: 460px;
	height: 460px;
	padding: 0;
	margin: 0;
	background-color: #ffffff;
	overflow: hidden;
}

#container {
	display: inline-block;
	padding: 40px;
	width: 500px;
	height: 500px;
	margin: 0;
	background-color: #ffffff;
	overflow: hidden;
}

</style>

<div id="container">
	<div id="qrcode"></div>
</div>

<script type="text/javascript">

var qrcode = new QRCode(document.getElementById("qrcode"), {
	width : 500,
	height : 500,
	colorDark : "#000000",
	colorLight : "#ffffff",
	correctLevel : QRCode.CorrectLevel.H,
	useSVG : true,
});

function makeCode(inText) {
	qrcode.makeCode(inText);
	var sw = window.innerWidth;
	var scaleTo = sw / 500;
	scaleTo = scaleTo * 0.9;
	console.log("Screen Width: " + sw);
	console.log("Scale TO: " + scaleTo);
	//setZoom(scaleTo,document.getElementById('qrcode'));
	setZoom(scaleTo,document.getElementById('container'));
}

function setZoom(zoom,el) {
      transformOrigin = [0,0];
//	    el = el || instance.getContainer();
	    var p = ["webkit", "moz", "ms", "o"],
            s = "scale(" + zoom + ")",
            oString = (transformOrigin[0] * 100) + "% " + (transformOrigin[1] * 100) + "%";

	    for (var i = 0; i < p.length; i++) {
	        el.style[p[i] + "Transform"] = s;
	        el.style[p[i] + "TransformOrigin"] = oString;
	    }

	    el.style["transform"] = s;
	    el.style["transformOrigin"] = oString;

}

//makeCode("TEST");

</script>
</body>
</html>
